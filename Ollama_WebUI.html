<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ollama WebUI</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Ollama WebUI</h1>
            <div class="header-buttons">
                <button class="new-chat-btn" id="newChatBtn" title="å¼€å¯æ–°å¯¹è¯">
                    ğŸ“
                </button>
                <button class="thinking-btn" id="thinkingBtn" title="å¼€å¯æ€è€ƒåŠŸèƒ½">
                    ğŸ’­
                </button>
                <button class="settings-btn" id="settingsBtn" title="è®¾ç½®">
                    âš™ï¸
                </button>
            </div>
        </header>

        <div class="chat-container">
            <div class="messages" id="messages">
                <div class="message system">
                    <div class="message-content">
                        æ¬¢è¿ä½¿ç”¨Ollama WebUIï¼æ‚¨å¯ä»¥ä¸Šä¼ Wordæˆ–TXTæ–‡ä»¶ï¼Œç„¶åä¸AIè¿›è¡Œå¯¹è¯ã€‚
                    </div>
                </div>
            </div>
            <div class="history-markers" id="historyMarkers"></div>

            <div class="input-area">
                <div class="file-upload-container">
                    <input type="file" id="fileInput" accept=".txt,.doc,.docx,.pdf,.jpg,.jpeg,.png,.gif,.bmp,.webp" multiple>
                    <button class="upload-btn" id="uploadBtn">
                        <span>ğŸ“ ä¸Šä¼ æ–‡ä»¶</span>
                    </button>
                    <div class="file-list" id="fileList"></div>
                </div>

                <div class="message-input-container">
                    <textarea 
                        id="messageInput" 
                        placeholder="è¾“å…¥æ‚¨çš„æ¶ˆæ¯..." 
                        rows="3"
                    ></textarea>
                    <button class="send-btn" id="sendBtn">
                        <span>å‘é€</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>è®¾ç½®</h2>
                <button class="close-btn" id="closeModalBtn">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="setting-item">
                    <label for="modelSelect">æ¨¡å‹:</label>
                    <select id="modelSelect">
                        <option value="">åŠ è½½ä¸­...</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label for="apiUrlInput">APIåœ°å€:</label>
                    <input 
                        type="text" 
                        id="apiUrlInput" 
                        placeholder="ä¾‹å¦‚: http://localhost:11434/api/chat"
                    >
                </div>
                <div class="setting-item">
                    <label>æ¨¡å‹å‚æ•°:</label>
                    <div class="param-inputs" style="margin-top: 15px;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                            <div>
                                <label style="display: block; margin-bottom: 5px; font-size: 12px; color: #666;">Temperature (0.0-2.0):</label>
                                <input type="number" id="temperatureInput" step="0.1" min="0" max="2" value="0.6" style="width: 100%; padding: 8px; border: 2px solid #e0e0e0; border-radius: 6px; font-size: 14px;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 5px; font-size: 12px; color: #666;">Repeat Penalty (1.0-2.0):</label>
                                <input type="number" id="repeatPenaltyInput" step="0.1" min="1" max="2" value="1.1" style="width: 100%; padding: 8px; border: 2px solid #e0e0e0; border-radius: 6px; font-size: 14px;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 5px; font-size: 12px; color: #666;">Top P (0.0-1.0):</label>
                                <input type="number" id="topPInput" step="0.05" min="0" max="1" value="0.9" style="width: 100%; padding: 8px; border: 2px solid #e0e0e0; border-radius: 6px; font-size: 14px;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 5px; font-size: 12px; color: #666;">Top K (1-100):</label>
                                <input type="number" id="topKInput" step="1" min="1" max="100" value="40" style="width: 100%; padding: 8px; border: 2px solid #e0e0e0; border-radius: 6px; font-size: 14px;">
                            </div>
                        </div>
                    </div>
                    <div id="modelParams" class="model-params"></div>
                </div>
                <div class="setting-actions">
                    <button class="save-btn" id="saveSettingsBtn">ä¿å­˜</button>
                    <button class="export-btn" id="exportHistoryBtn">å¯¼å‡ºå†å²</button>
                    <button class="import-btn" id="importHistoryBtn">å¯¼å…¥å†å²</button>
                    <input type="file" id="historyFileInput" accept=".json" style="display: none;">
                    <button class="cancel-btn" id="cancelSettingsBtn">å–æ¶ˆ</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.0.379/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.0.379/pdf.worker.min.js"></script>
    <script>
        // é…ç½®pdf.js
        if (window.pdfjsLib) {
            window.pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.0.379/pdf.worker.min.js';
        }
    </script>
    <script src="app.js"></script></div>

    <div class="author-info">
        å¼€å‘äººå‘˜ï¼šå¸¸æ—­ã€åˆ˜äºšé‘«
    </div>
</body>
</html>